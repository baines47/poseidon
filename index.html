<!DOCTYPE html>
<html lang="sv">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.simplecss.org/simple.min.css">
    <title>Poseidon Verktyg</title>
    <script>
      function calcPertinax() {
        
        // 츿ndra det h칛r v칛rdet om det 칛ndras p친 maskinen
        const pertinaxMax = 31000;
        
        var pertinaxCyclesNow = document.getElementById("pertinaxCyclesNowInput").value;
        
        // R칛kna ut hur m친nga slag det finns kvar p친 pertinax och hur m친nga sekunder det blir
        var pertinaxLeft = pertinaxMax - pertinaxCyclesNow;
        var pertinaxLeftSec = pertinaxLeft * 6;

        //R칛kna ut hur m친nga minuter pertinax har kvar
        var pertinaxLeftMin = pertinaxLeftSec / 60;

        // R칛kna ut hur m친nga timmar pertinax har kvar
        var pertinaxLeftHour = pertinaxLeftMin / 60;
        // alert(pertinaxLeftHour);
        
        // Runda av antal timmar, till hela timmar
        pertinaxLeftHour = Math.floor(pertinaxLeftHour);
        // alert(pertinaxLeftHour);

        // Bortse fr친n antal timmar och r칛kna bara ut hur m친nga minter som 칛r kvar
        pertinaxLeftMin = pertinaxLeftMin - (pertinaxLeftHour * 60);
        // alert(pertinaxLeftMin);

        timeNow = Date.now();
        
        // R칛kna vid vilken tid bytet kommer ske, resultatet 칛r i millisekunder
        const pertinaxChangeTime = new Date((pertinaxLeftSec * 1000) + timeNow);
        
        // F칬rvandla millisekunderna till l칛sligt tidsformat
        let pertinaxChangeTimeUTC = pertinaxChangeTime.toLocaleString('sv-SE');
               
        // Printa resultatet p친 websidan
        document.getElementById("pertinaxTimeLeft").innerHTML = "Det 칛r minst " + pertinaxLeftHour + " timmar och " + pertinaxLeftMin + " minuter kvar till pertinaxbyte.<br>" + "Det inneb칛r att det blir pertinaxbyte n친gon g친ng efter " + pertinaxChangeTimeUTC;
        
      }

      function calcLCTime()
      {
        // H칛mta data fr친n anv칛ndare fr친n foruml칛ret
        var numLBLeft = document.getElementById("lbLeft").value;
        var machineSpeed = document.getElementById("speed").value;
                
        // Om det finns kommatecken, konvertera dom till punkter
        numLBLeft = numLBLeft.replace(",",".");

        // R칛kna ut hur m친nga produkter det 칛r kvar att k칬ra
        var productsLeft = numLBLeft * 1260;

        // Om det finns kommatecken, konvertera dom till punkter
        machineSpeed = machineSpeed.replace(",",".");

        // R칛kna ut hur fort det g친r i minuten
        var machineSpeedMin = machineSpeed / 60;

        // R칛kna ut hur m친nga minuter det 칛r kvar till LC
        var minToLC = productsLeft / machineSpeedMin;

        // R칛kna ut vid vilken tid det blir LC, resultat i millisekunder
        var timeNow = Date.now();
        const whenLC = new Date((minToLC * 60000) + timeNow);

        // F칬rvandla millisekunderna till l칛sligt tidsformat
        let whenLCTimeUTC = whenLC.toLocaleString('sv-SE');
        
        // R칛kna ut hur m친nga timmar det 칛r kvar till LC
        var hoursToLC = minToLC / 60;
        
        // Runda av antal timmar, till hela timmar
        hoursToLC = Math.floor(hoursToLC);

        // Bortse fr친n antal timmar och r칛kna bara ut hur m친nga minter som 칛r kvar
        minToLC = minToLC - (hoursToLC * 60);
        
        document.getElementById("timeToLC").innerHTML = "Det 칛r " + hoursToLC + " timmar och " + minToLC + " minuter kvar till LC<br>Det inneb칛r att det blir LC n친gon g친ng efter<b> " + whenLCTimeUTC + "</b>";
      }

    </script>
  </head>
  <body>
    <h1>P친seidon Verktyg</h1>
    <article>
      <p><b>OBS!</b><br>Notera att detta 칛r ett hemmabygge och kanske inte r칛knar r칛tt.游땔</p></article>
    <article>
    <p><b>Tid kvar tills Pertinaxbyte</b><br>
    Formeln r칛knar med att pertinaxbytet sker n칛r WPE n친tt 31000 cykler och att den r칛knar upp en cykel var 6e sekund.</p>
      <b>Hur m친nga cykler ligger Pertinax p친 nu?</b>
      <form id="pertinaxCyclesNow"">
        <input type="number" id="pertinaxCyclesNowInput" name="pertinaxCyclesNowInput"><br>
        <input type="button" onclick="calcPertinax()" value="R칛kna ut">
      </form>
      <p id="pertinaxTimeLeft"></p>
      </article>

      <article>
      <b>Tid kvar till LC</b><br>
      <form id="timeToLCInput">
        <p></p><b>Hur m친nga lastb칛rare 칛r det kvar att k칬ra?</b><br>
          <input type="text" id="lbLeft" name="lbLeft"><br>
        </p>
        <p>
          <b>I vilken hastighet g친r maskinen enligt Axxos?</b><br>
          <p>Antal produkter i timman, t.ex. 2320</p>
          <input type="number" id="speed" name="speed"><br>
        </p>
        <input type="button" onclick="calcLCTime()" value="R칛kna ut">
      </form>
      <p id="timeToLC"></p>
      </article>
  </body>
</html>
